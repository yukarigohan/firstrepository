<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" /> 
  <title>Hello World in BiwaScheme</title>
</head>
<body>

<div id="bs-console"></div>

<script src="../../src/development_initializer.js">
(define-macro (define-record-type' record-name ctor-spec pred-name . field-specs)
  (let1 fields (map (lambda (fs)
                      (if (= 2 (length fs))
                        (cons 'immutable fs)
                        (cons 'mutable fs)))
                    field-specs)
    `(define-record-type
      (,record-name ,(car ctor-spec) ,pred-name)
      (fields ,@fields))))
    
; Example (taken from R7RS p.27)
(define-record-type' <pare>
  (kons x y)
  pare?
  (x kar set-kar!)
  (y kdr))

(print (pare? (kons 1 2)))
(print (pare? (cons 1 2)))
(print (kar (kons 1 2)))
(print (kdr (kons 1 2)))
(let ((k (kons 1 2)))
  (set-kar! k 3)
  (print (kar k)))
</script>

</body>
</html>
