# require的な

## TODO(2016-11)

- script type="text/biwascheme" も実行する

## 調査

- Move http://movelang.org/
  `<script type="text/move" module="bar">` -> bar
  `<script type="text/move" src="capitalize.mv"></script>` -> capitalize

## 仕様案

- 案
  - script type="text/biwascheme" data-library="a b c"

- old style
  <script src="biwascheme.js">
  ; your program
  </script>

- new style
  <script src="biwascheme.js"></script>
  <script type="text/biwascheme">
  (import (scheme base) (tetris block))
  ...
  </script>

- new style (library definition)
  <script type="text/biwascheme" data-biwa-library="(test block)">
  (define-library (tetris block)
    (export いろいろ)
    (import (scheme base))
    (begin
      ...
  </script>

- new style (include local)
  <script type="text/biwascheme">
  (load "")
  ...
  </script>
  <script type="text/biwascheme">
  (load "")
  ...
  </script>

- new style (include remote)
  <script type="text/biwascheme">
  (load "")
  ...
  </script>
  <script type="text/biwascheme">(load "")</script>

## 2016/11/29

### local load 02:27

分割記述に対応すべきだろうか？

  <script type="text/biwascheme">
  ; メイン
  (load "")
  ...
  </script>
  <script type="text/biwascheme" data-biwa-filename="a.scm">
  ...
  </script>

うーん、ライブラリをちゃんと実装すればこういうの要らない、、か？
loadはloadでセマンティクスを考えるべきかも？
あるいは

  <script type="text/biwascheme">
  ; A案
  (load "block")
  ; B案
  (load-script "block")
  ...
  </script>
  <script type="text/biwascheme" data-biwa-name="block">
  ...
  </script>

###  01:55

> ので、importを書いたらR7RSモードってことにしようと思う。
> そうすれば、新形式をすぐに実装できる。

ということにしたけど具体的に何を実装すればいい？

> - script type="text/biwascheme" も実行する

ということで良いのかな。

## 2016/10/23

### 名前空間の共有 03:03

MVMどうしようかなぁ。

仕様的にはデフォルトで名前空間別れるのが綺麗だけど、わかりにくそう。

てかJSはどのscriptも名前空間同じなんだし、それに揃えるのが良いかもね(少なくともデフォルトは)。

## 2016/10/22

### data-library 17:44

define-libraryがあるから不要かとも思ったけど、これがないと全部のscriptタグの
中身を走査する必要があるからやっぱりあったほうがいいな。

